workspaces:
- name: Trace Dev
  slug: trace-dev
  description: A workspace containing all the master branches of the Trace projects.
  notes: |
    This should *probably* contain **installation notes** specific to this workspace.

    It can even use **Markdown!** How *unsafe.*
  projects:
  - slug: trace-api
    repository: git@github.com:stratumn/trace-api.git
    branch: master
    description: The API for Trace.
  - slug: trace-ui
    repository: git@github.com:stratumn/trace-ui.git
    branch: master
    description: The UI for Trace.
  - slug: trace-sdk-js
    repository: git@github.com:stratumn/trace-sdk-js.git
    branch: master
    description: The SDK for Trace.
  - slug: account-api
    repository: git@github.com:stratumn/account-api.git
    branch: master
    description: The API for Account.
  - slug: account-ui
    repository: git@github.com:stratumn/account-ui.git
    branch: master
    description: The UI for Account.
  tasks:
  - name: Install dependencies
    steps:
    - projects:
      - trace-api
      - trace-ui
      - trace-sdk-js
      - account-api
      - account-ui
      commands:
      - yarn install || true
  - name: Launch everything
    steps:
    - projects:
      - trace-api
      - trace-ui
      - account-api
      - account-ui
      commands:
      - spawn yarn start
      background: true
- name: stratumn.com
  slug: stratumn.com
  description: A workspace containing all the master branches of the stratumn.com projects.
  notes: You need ruby, rvm, node, and yarn.
  projects:
  - slug: stratumn.com
    repository: git@github.com:stratumn/stratumn.com.git
    branch: redesign
    description: The main stratumn.com repo.
  tasks:
  - name: Install dependencies
    steps:
    - projects:
      - stratumn.com
      commands:
      - rvm install $(cat .ruby-version) --with-openssl-dir=/usr/local/opt/openssl
      - rvm use $(cat .ruby-version)
      - gem install bundler
      - bundle install
      - yarn install
  - name: Launch
    steps:
    - projects:
      - stratumn.com
      commands:
      - spawn yarn serve
